# Airport_On_Time_Arrivals

#Simple Regression Analysis
## Summary 
Every month thousands of airline flights are cancelled, rescheduled, or delayed, leading to negative sentiment from consumers, potential losses from cancelled flights and in the worse cases a chain reaction of delayed flights across multiple airports. For a consumer this leads to a negative customer experience and for the airlines themselves, can cause a decrease in customer & brand loyalty.
This poses the question, what can airlines do to predict flight arrival delays? And from there how can airlines use statistical models and data analytics to mitigate potential loss from large delay times.
There are several common factors used to predict airline flight delays. ‘National Air Security Delay’, ‘Carrier Delay’, ‘Weather Delay’, ‘Late Aircraft Delay’ and ‘Security Delay’ tend to be the most prevalent and will be used throughout the following report to predict arrival delays. Alongside these five common factors several other continuous variables will be analyzed to find any potential alternatives to predict arrival delays.
Through the help of exploratory data analysis and regression modeling I was able to find that the most accurate determinant of airline arrival delays is the airline departure delay time. The potential applications of the model are vast and can be used on an ad-hoc basis to predict arrival delays, given a departure delay. In the report below a in depth discussion of the methods, data, regression techniques and more will follow, ending with recommendations and next steps.

## Data
The purpose of this study is to find the best ‘fitting’ variable to predict airline arrival delays. Several factors that may be able to predict arrival delays include National Air Security Delay’, ‘Carrier Delay’, ‘Weather Delay’, ‘Late Aircraft Delay’ and ‘Security Delay’. Additionally, several other factors were tested for predicting arrival delays including ‘Distance’ and ‘Departure Delays’. All 7 of these factors have the potential to predict arrival delays so, various Exploratory Data Analysis techniques and correlation tests were used to find the optimal value in predicting arrival delays. Data for the report was collected from the Bureau of Transportation statistics from November 2021. The data is specifically from New York and various querying techniques were used to focus on flights with departure delays greater than 0 and that originated from JFK airport. From the original csv file around 

## Methodology
Various statical methods and techniques are used through this report to solve the proposed research question. Extensive exploratory data analysis was conducted prior to the use of simple linear regression modeling, which is covered in depth in the following section. Additionally in the report we use hypothesis testing on our models’ parameters to test for statistical significance, with a more in-depth discussion in the results / regression analysis section. Finally, all computations and regression models were created in SAS, with exploratory data analysis done in python.
Exploratory Data Analysis Results
Before running any regression model’s extensive exploratory data analysis was conducted to gain knowledge on the shape, distribution, skew, and any possible correlations between variables. First each delay factor was plotted as a probability distribution, with each of the delay factors being highly skewed to the right. This can be interpreted as each of the delay factors having a relatively low amount of actual delay time in minutes, with the occasional flight that may be delayed for an extensive period. In terms of delay times, these results are in favor for the airlines, as we learn that most flights that are delayed are not for extensive or long time periods. 
After learning about the distribution of airline delay times, scatterplots were used to find any relationship between the delay variables and arrival delay. The scatterplots used are very important as they give an initial idea of relationships between arrival delay and the delay variables. Out of all the variables “departure delay” had the strongest positive linear relationship with arrival delay. “Late Aircraft Delay” and “Carrier Delay” also shared a moderate positive linear relationship with arrival delay though both variables had high amounts of variation, the shorter “Late Aircraft Delay” or “Carrier Delay” was. The remaining delay variables had very little correlation with arrival delay and showed very little signs of any relationship. Additionally, a correlation coefficient of 0.94 exists between departure delay and arrival delay confirming the strong linear relationship observed in the scatterplots.
Finally, boxplots were used to gain an understanding of the number of outliers in each of the delay variables, with each of the delay variables having a high number of outliers. In particular “Late Aircraft Delay” and “Weather Delay” tended to have the highest number of outliers between the delay variables. Additionally basic frequency tables were used to calculate the percentage of cancelled flights in JFK airport which in November 2021 totaled too around 44 cancelled flights, out of the 10,123 flights that flew out of JFK or 0.43% of flights being cancelled.

## Simple Linear Regression Analysis Results
To create a statistically significant model hypothesis testing around a model parameter β is required. Below is the hypothesis test for the model at a significance level a=0.05: 
H_0 ∶ β=0
H_(a ):   β≠0
After hypothesizing around the model parameters 5 different regression models were ran with each regression model being chosen based of the scatterplots created in the exploratory data analysis. Scatterplots were used to test which variables to model, because if there is a positive linear relationship between an x variable and y variable, it is very likely that a regression line will ‘fit’ our model and allow for predictions and a statistically significant β. Based on this procedure the five model parameters in which β is tested include: “Carrier Delay” , “Late Aircraft Delay”, “Security Delay”, “NAS Delay” and “Departure Delay”.  
“Carrier Delay” offered mediocre results as a model parameter. Analyzing our regression model shows that “Carrier Delay” lacks as an accurate model parameter. Looking at the ANOVA table we can reject the null hypothesis with a p value < 0.0001. Additionally, the parameter estimate, “Carrier Delay”, also shows a statistically significant relationship with a p value < 0.0001. However, after that it becomes clear that carrier delay is a very poor parameter for creating an accurate model. If we look at the coefficient of determination of the model, we can see that around 60% of the variation in “Arrival Delay” can be determined by “Carrier Delay”. Though this may sound great we need to realize that a whopping 40% of the variation in “Arrival Delays” is unexplained by “Carrier Delay”. The high coefficient of variation also supports this view with a CV of 67.39%, showing a high amount of variation within the model. For reference here is the model for predicting “Arrival Delay” with “Carrier Delay” as β:
y (Arrival Delay)=  29.76 + 0.86 (Carrier Delay)
Though the slope, 29.76 is hard to interpret, we can see that for each additional minute of carrier delay arrival delay is expected to increase by 0.86 minutes.
Next, I evaluated “Late Aircraft Delay”, “NAS Delay” and “Security Delay” as possible model parameters for predicting “Arrival Delay”. All three of these parameters performed very poorly when compared to “Carrier Delay” and “Departure Delay”, so I will keep my analysis brief and explain why I did not consider these variables when choosing a parameter of best fit. All three of these models were able to past our hypothesis test and we were able to reject the null hypothesis, with p values of < 0.0001 being reported across all three variables. Additionally, each parameter estimate reported a p value < 0.0001, showing that there is a statistically significant relationship between “NAS Delay”, “Security Delay” and “Late Aircraft Delay”, when each variable is evaluated individually as a model parameter. The equations for each respective model will be listed in the appendix below and can be referenced if need be. After testing for significance, each model was tested by looking at the coefficient of determination, to check if the given parameter (“NAS Delay, Security Delay, Late Aircraft Delay”) is able to explain variation in our explanatory variable “Arrival Delay”. All three of the variables were not able to explain enough variation in “Arrival Delay”, with the following table showing a brief summary of each of the coefficient of determinations for “NAS Delay, Security Delay, Late Aircraft Delay”.
Model Parameter 	Coefficient Of Determination 	Percentage Form
NAS Delay	0.0436	4.36%
Security Delay	0.0013	0.13%
Late Aircraft Delay	0.1571	15.71%
Interpreting the following table, we find that when using “NAS Delay” as our model parameter only 4.36% of variation in “Arrival Delay” can be explained by “NAS Delay”. When “Security Delay” is used only 0.13% of variation in “Arrival Delay” is explained by our model parameter. And finally, when “Late Aircraft Delay” is used only 15.71% of the variation in “Arrival Delay” is explained by “Late Aircraft Delay”. Considering we want a model that will accurately predict “Arrival Delay” each of these parameters are terrible, with high amounts of variation being unexplained by each of these parameters.
Finally, one last variable was tested and that was “Departure Delay”. Though not labeled as one of the 5 main delay variables, when conducting EDA, it was obvious that “Departure Delay” had a strong positive relationship with “Arrival Delay”. This led to me deciding that it would be smart to include “Departure Delay” as a possible model parameter to predict “Arrival Delay”. After running a simple regression model with “Departure Delay” as β there were many key statistical tests and procedures that our model passed, which led to me conclude that “Departure Delay” is the best parameter for developing a simple regression model to predict “Arrival Delay”.
First looking at the ANOVA table there is statistically significant relationship between our model parameter (“Departure Delay”) and the predicted output (“Arrival Delay”). We report a p-value of less than <0.0001, which allows us to reject the null hypothesis at our given significance level 0.05. From there we can look towards the coefficient of determination, which reports a value of 0.9013. When interpreting the coefficient of determination, we can conclude that 90.13% of the variation in “Arrival Delay” can be explained by “Departure Delay”. This is a favorable result as it means that only 10% of variation between “Arrival Delays” is unexplained by “Departure Delay”. When compared to the other model parameters tested above it starts to become clear that “Departure Delay” is the best parameter for predicting “Arrival Delays”. 
Additionally, there is a relatively low ROOT MSE (16.57) when compared to our other models and the parameter estimate reports a p value < 0.0001 allowing us to reject the null hypothesis for parameter estimates and conclude that “Departure Delay” is a statistically significant parameter for predicting “Arrival Delay”. The only downside of the given model is that there is a high coefficient of variation of 75.13%, which can be worrisome. However, I akin the high amount of variation to the small number of flights with extremely long delays, as highlighted by the histograms in the appendix. Finally, we can create a regression equation to predict “Arrival Delay” as shown here:
y (Arrival Delay)= -8.86+0.9998 (Depature Delay)
When compared to our other regression equations this equation above is much easier to interpret. When there is no “Departure Delay” we can except “Arrival Delay” to be nonexistent and negative, meaning a flight is expected to arrive on time or early. However, with each additional minute of “Departure Delay”, “Arrival Delay” increases by approximately 0.9998 minutes. Despite the high coefficient of variation, “Departure Delay” is still the best parameter β for predicting “Arrival Delay”, due to the high coefficient of determination, statistically significant parameter estimate, relatively low root MSE and easily interpretable equation results. 

## Conclusions and Next Steps
Through the in-depth analysis of multiple variables regarding flight delay times, we were able to systematically determine the best variable for determining “Arrival Delay” times. We conclude that “Departure Delay” is the best explanatory variable for a simple regression model that predicts “Arrival Delay”. In a practical sense, if an airline is given a “Departure Delay” time for a given flight, they could use a model similar to the one proposed to predict the “Arrival Delay” for a given flight, assuming they create a model based off the airline’s origin airport.

However, there are still several unknowns that will need more time to fully explore and understand. First as a model itself a high amount of variation is still unexplained by “Departure Delay”, with a high coefficient of variation confirming this assumption. Though it may not work, I suggest in the future a multivariable regression model be constructed to account for unexplained variation within the model. Additionally, the sample size for our analysis is very small with only 3161 flights from JFK airport being used to create the regression model. When compared to the millions of flights that occur yearly, it becomes obvious that more data be collected to create an accurate regression model. I suggest a government API be leveraged allowing us to pull data from more airports across the nation and at a larger time interval. Though it will take a longer time to process, utilizing cloud resources such as google collab or AWS will make this possible. Both a larger sample size and a multivariable model will allow us to create a more robust model to accurately predict “Arrival Delays”.
